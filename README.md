# 2024-NC2-M36-HealthKit
NC2 ì˜¤ì „ íŒ€36 ìŠ¤íŒŒí¬ì—†ëŠ” ì‹œëª¬ìŠ¤íŒŒí¬íŒ€~!

![image](https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/920e6b88-96f2-4ce2-90a0-55d8adf1d116)

# 2024-NC2-M0-AugmentedReality
## ğŸ¥ Youtube Link
(ì¶”í›„ ë§Œë“¤ì–´ì§„ ìœ íŠœë¸Œ ë§í¬ ì¶”ê°€)

## ğŸ’¡ About Augmented Reality

### HealthKit
- **ì‚¬ìš©ìì˜ ê°œì¸ ì •ë³´ ë³´í˜¸ ë° ì œì–´ë¥¼ ìœ ì§€í•˜ë©´ì„œ ê±´ê°• ë° í”¼íŠ¸ë‹ˆìŠ¤ ë°ì´í„°ì— ì ‘ê·¼ ë° ê³µìœ **
- Appleì´ ì œê³µí•˜ëŠ” Health Data ìˆ˜ì§‘ ë° ê´€ë¦¬ í”„ë ˆì„ì›Œí¬
- ì‚¬ìš©ìë“¤ì´ ì—¬ëŸ¬ ê±´ê°• ê´€ë ¨ ì•±ê³¼ ê¸°ê¸°ì—ì„œ ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ

### HealthKitì˜ ë°ì´í„° ìœ í˜•
- Characteristic data (íŠ¹ì„± ë°ì´í„°)
  - ìƒë…„ì›”ì¼, í˜ˆì•¡í˜•, ì„±ë³„, í”¼ë¶€ìœ í˜•ê³¼ ê°™ì´ ì¼ë°˜ì ìœ¼ë¡œ ë³€ê²½ ë˜ì§€ ì•ŠëŠ” í•­ëª©
- Sample data (ìƒ˜í”Œ ë°ì´í„°)
  - ëŒ€ë¶€ë¶„ì˜ ì‚¬ìš©ì ê±´ê°• ë°ì´í„° íŠ¹ì • ì‹œì ì˜ ë°ì´í„°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë°ì´í„°
- Workout data (ìš´ë™ ë°ì´í„°)
  - í”¼íŠ¸ë‹ˆìŠ¤ ë° ìš´ë™ í™œë™ì— ëŒ€í•œ ë°ì´í„°
- Source data (ì†ŒìŠ¤ ë°ì´í„°)
  - ë°ì´í„°ë¥¼ ì €ì¥í•œ ì•± ë˜ëŠ” ê¸°ê¸°ì˜ ëŒ€í•œ ì •ë³´ê°€ í¬í•¨
- Delete objects (ì‚­ì œëœ ê°œì²´)
  - ì‚­ì œëœ í•­ëª©ì˜ ë°ì´í„°ì˜ uuidë¥¼ ì„ì‹œë¡œ ì €ì¥í•˜ëŠ”ë° ì‚¬ìš©>
 
## ğŸ¯ What we focus on?
- HealthKitì˜ í™œìš©..
  
  ê±´ê°• ë°ì´í„°ë¥¼ ì½ê³  ê³µìœ (ì“°ê¸°)í•˜ëŠ” ê¸°ëŠ¥ì— ì§‘ì¤‘!

  ë°›ì•„ì˜¨ ê±´ê°• ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ í™œìš©í•  ê²ƒì¸ê°€ê°€ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°ë¨

- ê±´ê°• ì•±ì— ì¹´í˜ì¸ì„ ê¸°ë¡í•  ìˆ˜ ìˆì§€ë§Œ, ì¹´í˜ì¸ì˜ í•¨ëŸ‰ì„ ì§ì ‘ ì‘ì„±í•´ì•¼ í•¨

<p align="center">
  <img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/947a90c4-66b9-481e-998f-29e157a7823e" width="196.5" height="426">
  <img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/8df0f5ab-767a-4d1c-b4f3-66644af81c0d" width="196.5" height="426">
  </p>

- ì»¤í”¼ë¥¼ ë§ì´ ë§ˆì‹œëŠ” ì‚¬ëŒë“¤ì—ê²Œ ì¹´í˜ì¸ì˜ ì¼ì¼ ê¶Œì¥ëŸ‰ì„ ì•Œë ¤ì£¼ì–´ ê³¼ë‹¤ ì„­ì·¨ë¥¼ ë°©ì§€
- ì†ì‰½ê²Œ ì¹´í˜ì¸ í•¨ëŸ‰ì„ ì…ë ¥í•  ìˆ˜ ìˆë„ë¡ í•˜ì!

## ğŸ’¼ Use Case
1. ê±´ê°• ì•±ì— ì¹´í˜ì¸ ì…ë ¥ ì¹¸ë„ ëª¨ë¥´ëŠ”..
2. ì•Œê³  ìˆì–´ë„ ì¹´í˜ì¸ì˜ í•¨ëŸ‰ì„ ì¡°ì‚¬í•˜ì—¬ ì‘ì„±í•´ì•¼ í•´ì„œ ì†ì´ ì•ˆê°€ëŠ”..
3. ì¹´í˜ì¸ ì¼ì¼ ê¶Œì¥ëŸ‰ë„ ëª°ë¼ì„œ í”¼ê³¤í•  ë•Œë§ˆë‹¤ ë§ˆì‹œëŠ”..

### <p align="center">ì¹´í˜ì¸ì˜ ê¸°ë¡ì„ ê°„í¸í•˜ê²Œ í•´ì£¼ì–´ ê³¼ë‹¤ ì„­ì·¨ì˜ ìœ„í—˜ì„ ì•Œë¦¬ì!</p>

## ğŸ–¼ï¸ Prototype
<p align="center">
  <img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/3329e116-a248-4483-a845-7a22adb4a639" width="196.5" height="426">
  <img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/01cfa7f3-c5ff-42b4-a9a8-670df6d8f75d" width="196.5" height="426">
  <img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/08142c03-9a0b-4df0-9be6-eee17dce922a" width="196.5" height="426">
</p>
<p align="center">
  <img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/c3be3b7c-81be-48f4-8a04-fa484571e7e8" width="196.5" height="426">
  <img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/2af9f383-23a9-45f5-bae4-7ef4ba9de297" width="196.5" height="426">
  <img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M36-HealthKit/assets/102645399/a0af1dff-3973-4f6e-94fb-078dd7f483bd" width="196.5" height="426">
</p>

## ğŸ› ï¸ About Code

<pre>
  <code>
import HealthKit

// HealthKit ë°ì´í„° ì €ì¥ì†Œ ì´ˆê¸°í™”
let healthStore = HKHealthStore()
  </code>
</pre>
- HealthKit í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ HealthKit ë°ì´í„° ì €ì¥ì†Œë¥¼ ì‚¬ìš©

<pre>
  <code>
// ì¹´í˜ì¸ ë°ì´í„° íƒ€ì… ì •ì˜
let caffeineType = HKQuantityType(.dietaryCaffeine)
// ì½ê¸°/ì“°ê¸° ê¶Œí•œì„ ìš”ì²­í•  HealthKit ë°ì´í„° íƒ€ì… ì§‘í•©
let healthTypesToRead: Set = [caffeineType]
let healthTypesToShare: Set = [caffeineType]

// ë¹„ë™ê¸°ì ìœ¼ë¡œ HealthKit ë°ì´í„° ì ‘ê·¼ ê¶Œí•œ ìš”ì²­
Task {
    do {
        try await healthStore.requestAuthorization(toShare: healthTypesToShare, read: healthTypesToRead)
        // ì—¬ê¸°ì— ìŠ¤í”Œë˜ì‹œ -> í™ˆ í™”ë©´ ë„˜ì–´ê°€ëŠ” ê±° êµ¬í˜„
    } catch {
        print("error fetching health data") // ê¶Œí•œ ìš”ì²­ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì„¸ì§€ ì¶œë ¥
    }
}
  </code>
</pre>
- ì¹´í˜ì¸ íƒ€ì…(.dietaryCaffeine)ì„ ì§€ì •í•˜ê³  ì½ê¸°/ì“°ê¸° ê¶Œí•œì„ ìš”ì²­í•  ë°ì´í„° ì§‘í•© ìƒì„±
- HealthKit ë°ì´í„° ì €ì¥ì†Œì— requestAuthorizationìœ¼ë¡œ ì ‘ê·¼ ê¶Œí•œì„ ìš”ì²­(ì½ê¸°/ì“°ê¸° ì „ë¶€)

<pre>
  <code>
func fetchTodayCaffeine(completion: @escaping (Int?) -> Void) {
    let caffeineType = HKQuantityType(.dietaryCaffeine)
    let predicate = HKQuery.predicateForSamples(withStart: .startOfDay, end: Date())
    
    let query = HKStatisticsQuery(quantityType: caffeineType, quantitySamplePredicate: predicate) { _, result, error in
        guard let quantity = result?.sumQuantity(), error == nil else {
            print("error fetching today step data") // ë°ì´í„° ìš”ì²­ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì„¸ì§€ ì¶œë ¥
            completion(nil)
            return
        }
        // ì¹´í˜ì¸ í•¨ëŸ‰ mg ë°ì´í„° ë³€í™˜
        let caffeine = quantity.doubleValue(for: HKUnit.gramUnit(with: .milli))
        completion(Int(caffeine))
    }
    
    healthStore.execute(query) // ì¿¼ë¦¬ ì‹¤í–‰
}
  </code>
</pre>
- ì¼ì¼ ì¹´í˜ì¸ í•¨ëŸ‰ë§Œ ë°›ì•„ì˜¬ ì˜ˆì • â†’ ì‹œì‘ ë‚ ì§œì™€ ì¢…ë£Œ ë‚ ì§œë¥¼ ì •í•´(í•˜ë£¨) ì¡°ê±´ì(predicate)ë¥¼ ìƒì„±
- ì¿¼ë¦¬ ìˆ˜í–‰ìœ¼ë¡œ ì§€ì •ëœ ì¡°ê±´ì˜ ë°ì´í„°ë¥¼ ë°˜í™˜

<pre>
  <code>
func saveCaffeine(caffeineAmount: Double) {
    // ì¹´í˜ì¸ ë°ì´í„° íƒ€ì… ì •ì˜
    let caffeineType = HKQuantityType(.dietaryCaffeine)
    // ì¹´í˜ì¸ ì„­ì·¨ëŸ‰ì„ ë‚˜íƒ€ë‚´ëŠ” HealthKit ìˆ˜ëŸ‰ ê°ì²´ ìƒì„±
    let caffeineQuantity = HKQuantity(unit: HKUnit.gramUnit(with: .milli), doubleValue: caffeineAmount)
    // ìƒ˜í”Œ ìƒì„±
    let caffeineSample = HKQuantitySample(type: caffeineType, quantity: caffeineQuantity, start: Date(), end: Date())
    
    // ë°ì´í„° ì €ì¥
    healthStore.save(caffeineSample) { success, error in
        if let error = error {
            print("Error saving caffeine intake: \(error.localizedDescription)")
        } else {
            print("Successfully saved caffeine intake.")
        }
    }
}
  </code>
</pre>
- ì¹´í˜ì¸ í•¨ëŸ‰ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìƒ˜í”Œ(ì¹´í˜ì¸ ë‹¨ìœ„, ì €ì¥í•˜ëŠ” ì‹œê°„ ë“±ì— ë§ê²Œ)ì„ ë§Œë“¤ì–´
  HealthKit ë°ì´í„°ì— .saveë¡œ ì €ì¥
